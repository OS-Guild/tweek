version: '1.0'
steps:
  BuildingEditor:
    type: composition
    image_name: node:6.10.2
    working_directory: ./services/editor/
    description: Building server...
    composition:
      version: '2'
      services:
        ci-build:
          image: node:6.10.1-slim
    composition_candidates:
      ci-build:
        volumes:
          - .:/opt/app
        working_dir: /opt/app
        command: /bin/bash -c "yarn && yarn build-prod"
  BuildingDockerImage:
    title: Building Docker Image
    type: build
    image_name: soluto/tweek-back-office
    working_directory: ./services/editor/
    dockerfile: Dockerfile
